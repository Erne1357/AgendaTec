<<<<<<< Updated upstream
{% extends "layouts/base.html" %}
{% block title %}Mi carrera{% endblock %}
{% block content %}
<h1 class="h5 mb-3">Selecciona tu carrera</h1>
<select id="selProgram" class="form-select">
  <option value="">Selecciona...</option>
</select>
<div id="coordCard" class="card mt-3 d-none">
  <div class="card-body">
    <h5 class="card-title" id="coordName"></h5>
    <p class="mb-1"><strong>Correo:</strong> <span id="coordEmail"></span></p>
    <p class="mb-0"><strong>Horario:</strong> <span id="coordHours"></span></p>
=======
{% extends "base.html" %}
{% block title %}Alumno - Inicio{% endblock %}


{% block content %}
<div class="row g-3">
  <div class="col-12 col-lg-8">
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="card-title d-flex align-items-center gap-2">
          <i class="bi bi-info-circle"></i> Recordatorio importante
        </h5>
        <ul class="mb-3">
          <li>Solo puedes tener <strong>una solicitud activa</strong> a la vez.</li>
          <li>Si cancelas una solicitud, puedes crear otra, pero corres el riesgo de que ya no haya lugares.</li>
          <li>Si solicitas <strong>baja</strong> únicamente: se genera el registro (verifica tus <strong>créditos</strong>).</li>
          <li>Si solicitas <strong>alta</strong> o <strong>ambas</strong>: debes agendar una <strong>cita con tu coordinador</strong>.</li>
        </ul>
        <a href="{{ url_for('student_pages.student_new_request') }}" class="btn btn-primary">
          <i class="bi bi-rocket-takeoff me-1"></i> Iniciar solicitud
        </a>
        <a href="{{ url_for('student_pages.student_requests') }}" class="btn btn-outline-secondary ms-2">
          <i class="bi bi-journal-text me-1"></i> Ver mis solicitudes
        </a>
      </div>
    </div>
>>>>>>> Stashed changes
  </div>
</div>
{% endblock %}
{% block body_extra %}
<script>
(async function loadPrograms(){
  const r = await fetch('/api/v1/programs', {credentials:'include'});
  const data = await r.json();
  const sel = document.getElementById('selProgram');
  sel.innerHTML = '<option value="">Selecciona...</option>' + 
    data.items.map(p => `<option value="${p.id}">${p.name}</option>`).join('');
})();
document.getElementById('selProgram').addEventListener('change', async (e) => {
  const pid = e.target.value;
  const card = document.getElementById('coordCard');
  if(!pid){ card.classList.add('d-none'); return; }
  const r = await fetch(`/api/v1/programs/${pid}/coordinator`, {credentials:'include'});
  const data = await r.json();
  const c = (data.coordinators||[])[0];
  if(c){
    document.getElementById('coordName').textContent  = c.full_name;
    document.getElementById('coordEmail').textContent = c.email || 'N/D';
    document.getElementById('coordHours').textContent = c.office_hours || 'N/D';
    card.classList.remove('d-none');
    window.showToast && showToast('Coordinador cargado','success');
  }else{
    card.classList.add('d-none');
    window.showToast && showToast('Programa sin coordinador','warning');
  }
});
</script>
{% endblock %}
